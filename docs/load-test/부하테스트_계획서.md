# 부하 테스트 계획서

## 1. 테스트 개요

### 1.1 목적
- 쿠폰 발급 시스템의 동시성 제어 검증
- 시스템 성능 한계점 파악
- 장애 상황 대응 능력 평가
- 적절한 배포 스펙 도출

### 1.2 테스트 대상
- **API**: `/api/coupons/request` (쿠폰 발급 요청)
- **시스템**: Spring Boot 애플리케이션 + MySQL + Redis
- **핵심 기능**: 선착순 쿠폰 발급 (동시성 제어)

## 2. 테스트 시나리오

### 2.1 기본 시나리오
```
1. 100명 동시 사용자
2. 5분간 지속 테스트
3. 쿠폰 정책: 최대 1000개 발급 가능
4. 랜덤 사용자 ID (1-10000)
```

### 2.2 테스트 단계
- **Ramp-up**: 1분간 0→100명 증가
- **Sustained**: 5분간 100명 유지
- **Ramp-down**: 1분간 100→0명 감소

### 2.3 성능 기준
- **응답시간**: 95% < 1초
- **에러율**: < 10% (중복 발급 제외)
- **처리량**: 초당 20+ 요청

## 3. 테스트 환경

### 3.1 인프라 구성
- **애플리케이션**: Spring Boot (8080)
- **데이터베이스**: MySQL 8.0 (3307)
- **캐시**: Redis 7.4 (6379)
- **모니터링**: InfluxDB + Grafana

### 3.2 부하 생성 도구
- **k6**: 부하 테스트 스크립트
- **메트릭 수집**: InfluxDB
- **시각화**: Grafana 대시보드

## 4. 예상 결과

### 4.1 성공 시나리오
- 쿠폰 정확히 1000개 발급
- 중복 발급 방지 (409 에러)
- 안정적인 응답시간 유지

### 4.2 실패 시나리오
- 쿠폰 초과 발급
- 데이터 불일치
- 시스템 장애

## 5. 리스크 관리

### 5.1 데이터 정합성
- 테스트 전후 데이터 초기화
- 트랜잭션 롤백 확인
- 동시성 제어 검증

### 5.2 시스템 안정성
- 리소스 모니터링
- 장애 복구 계획
- 백업 데이터 준비
